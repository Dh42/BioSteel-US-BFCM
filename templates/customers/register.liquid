{%- section 'PageBanner' -%}
{%- section 'INF-RegisterPage' -%}

{% comment %}
<script type="text/javascript">
  var redirect_url = getCookie("redirect_url");
  if(!redirect_url || redirect_url == "" || redirect_url.length <= 0 || redirect_url == false || redirect_url == null){
    setCookie("redirect_url","/account");
  }
</script>
{% endcomment %}

<script type="text/javascript">  
  $(document).ready(function(){
    $('#join_teambiosteel').change(function() {
      console.log($('#join_teambiosteel').val());
      console.log(this.checked);
      if(this.checked != true){
         $("#customer_tags").val("");
      }
      else{
       
        $("#customer_tags").val("loyal");
      }
    });
    $('#join_teambiosteel12').change(function() {
      if(this.checked){
        
        $("#customer_tagsnext").val("loyal");
        
      }
      else{
        $("#customer_tagsnext").val("");
      }
    });
    
  });
</script>


<script type="text/javascript">
  
  // function validateEmail(emailField){
  //   var reg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
  //   if(reg.test(emailField.value) == false){
  //     return false;
  //   }
  //   return true;
  // }
  
  // $(document).ready(function(){
  //   var send_invite_customer_id = "";
    
  //   $("body").on('click','.send_invite',function(){
      
  //     $(".errors").html('Processing...');
      
  //     var data = {list:"other",customer_id:send_invite_customer_id}
      
  //     $.ajax({
  //       type: 'POST',
  //       headers:{
  //         Accept: "application/json",         
  //       }, 
  //       url: "https://whitewaterapps.com/biosteel-tags-www-test/biosteel-tags/send-invite-ca.php",
  //       data: data,
  //       dataType: "text",
  //       success: function(response){
  //         $(".errors").html('');
  //         console.log(response);
  //         if(response){
  //           response = JSON.parse(response);
  //         }
  //         $(".RegisterForm__button").val("Create Account");
          
  //         if(response && response.status == "success"){
  //           $(".reg_form_cont").hide();
  //           $(".success").html("We have sent you your account activation email. Please check your email and follow they instructions to complete your account set up.");
            
  //           if(response.login_token && response.login_token != ""){
  //             window.location.href = "/account/login/multipass/"+response.login_token;
  //           }
  //         }
  //         else{
  //           $(".errors").html(response.msg);
  //         }
  //         $('html, body').animate({scrollTop: $("#form_msg").offset().top-110},2000);
  //       },
  //       error: function(response){
  //         $(".errors").html('Something went wrong, please try again.');
  //         console.log("error");
  //         console.log(response);
  //         $(".RegisterForm__button").val("Create Account");
  //       }
  //     });
  //   });
    
  //   $(".RegisterForm__button").click(function(e){
  //     e.preventDefault();
  //     $(".errors").html("");
  //     $(".RegisterForm__button").val("Creating....");
  //     var firstName = $("#FirstName").val();
  //     var lastName = $("#LastName").val();
  //     var email = $("#Email").val();
  //     var password = $("#CreatePassword").val();
  //     var confirmPassword = $("#ConfirmPassword").val();
  //     //var accepts_marketing = $('#accepts_marketing:checkbox:checked').length > 0;
  //     var dob = $("#dob").val();
  //     var tags = $("#customer_tags").val();
  //     var join_teambiosteel = $('#join_teambiosteel').is(":checked");
  //      var tagsnext =  $("#customer_tagsnext").val();
  //     console.log(tagsnext);
  //      var join_teambiosteel12 = $('#join_teambiosteel12').is(":checked");

      
  //     var accepts_marketing = join_teambiosteel12;
      
      
  //     var errorMsg = "";
      
  //     if(!firstName || firstName.length <= 0){
  //       errorMsg = errorMsg + "First Name is required.<br>";
  //     }
      
  //     if(!lastName || lastName.length <= 0){
  //       errorMsg = errorMsg + "Last Name is required.<br>";
  //     }
      
  //     if(!email || email.length <= 0){
  //       errorMsg = errorMsg + "Email is required.<br>";
  //     }
  //     else{
  //       var reg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
  //       if(reg.test(email) == false){
  //         errorMsg = errorMsg + "Email is not valid.<br>";
  //       }
  //     }
      
  //     if(!password || password.length <= 0){
  //       errorMsg = errorMsg + "Password is required.<br>";
  //     }
  //     else if(!confirmPassword || confirmPassword.length <= 0){
  //       errorMsg = errorMsg + "Confirm Password is required.<br>";
  //     }
  //     else if(confirmPassword != password){
  //       errorMsg = errorMsg + "Password and Confirm Password should be same.<br>";
  //     }
      
  //     if(dob && dob != ""){
  //       var pattern =/^([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/;
  //       if(pattern.test(dob)){
  //       }
  //       else{
  //         errorMsg = errorMsg + 'Invaid date format for Date of Birth field, format should be: mm/dd/yyyy';
  //       }
  //     }
      
  //     if(errorMsg && errorMsg.length > 0){
  //       $(".errors").html(errorMsg);
  //       $(".RegisterForm__button").val("Create Account");
        
  //       $('html, body').animate({scrollTop: $("#form_msg").offset().top-110},2000);
  //       return false;
  //     }
      
  //     var data = {list:"other",dob:dob,tags:tags,tagsnext:tagsnext,first_name:firstName,last_name:lastName,email:email,password:password,confirm_password:confirmPassword,accepts_marketing:accepts_marketing}
  //     $.ajax({
  //       type: 'POST',
  //       headers:{
  //         Accept: "application/json",         
  //       }, 
  //       url: "https://whitewaterapps.com/biosteel-tags-www-test/biosteel-tags/register-ca.php",
  //       data: data,
  //       dataType: "text",
  //       success: function(response){
  //         console.log(response);
  //         if(response){
  //           response = JSON.parse(response);
  //         }
  //         $(".RegisterForm__button").val("Create Account");
          
  //         if(response && response.status == "success"){
  //           $(".reg_form_cont").hide();
  //           $(".success").html("your account has been successfully created");
            
  //           if(response.login_token && response.login_token != ""){
  //             window.location.href = "/account/login/multipass/"+response.login_token;
  //           }
  //         }
  //         else{
  //           if(response && response.send_invite && response.send_invite != ""){
  //             send_invite_customer_id = response.send_invite;
  //             //var errmsg = 'It looks like we already have your email address on file. To finish creating your account, <a href="javascript:void(0);" class="send_invite">Click Here</a> to receive your account activation email.';
  //             var errmsg = 'It looks like we already have your email address on file. To finish creating your account, <a href="javascript:void(0);" class="send_invite">Click Here</a>';
              
  //             $(".errors").html(errmsg);
  //           }
  //           else{
  //             $(".errors").html(response.msg);
  //           }
  //           //$(".errors").html(response.msg);
  //         }
  //         $('html, body').animate({scrollTop: $("#form_msg").offset().top-110},2000);
  //       },
  //       error: function(response){
  //         console.log("error");
  //         console.log(response);
  //         $(".RegisterForm__button").val("Create Account");
  //       }
  //     });
  //   });
  // });
</script>
